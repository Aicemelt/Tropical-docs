# 기능 명세서 — AI 스몰토크 주제 생성

**작성자: [백승현](https://github.com/Sirosho)** 

**문서 버전:** v1.0

**최종 수정일:** 2025.09.14


## 1. 개요

이 문서는 사용자가 자신의 일정, 일기, 할 일, 그리고 버킷리스트를 기록하고 관리하는 TropiCal 플랫폼의 통합 기능 명세서입니다. 기록된 모든 데이터는 단순히 개인의 삶을 체계적으로 관리하는 도구가 될 뿐만 아니라, AI가 사용자의 상황과 관심사를 분석하여 **개인 맞춤형 스몰토크 주제를 추천하는 핵심 재료**로 활용됩니다.

---

## 2. 사용자 기능 및 처리 흐름

### 2.1 회원가입 및 온보딩

모든 사용자는 로컬 계정 또는 소셜 계정(카카오, 구글, 네이버)을 통해 서비스에 가입할 수 있습니다.

* **회원가입**: 이메일, 비밀번호, 닉네임을 사용하거나 소셜 플랫폼의 정보를 연동하여 가입합니다. 로컬 계정의 경우 이메일 인증이 필수입니다.
* **온보딩**: 신규 가입 사용자는 필수 동의(서비스 이용 약관, 일정 기반 추천 동의)와 선택 동의(일기, 할 일, 버킷리스트 기반 추천 동의)를 진행해야 합니다. 필수 동의를 모두 완료해야만 서비스 이용이 가능합니다.

---

### 2.2 캘린더 및 기록 관리

사용자는 캘린더 뷰를 중심으로 모든 기록을 한눈에 관리할 수 있습니다.

* **월별/날짜별 뷰**: 캘린더를 통해 월별 일정과 일기를 확인하고, 특정 날짜를 클릭하여 상세 기록을 조회하거나 새로 작성할 수 있습니다.
* **일정 관리**: 날짜, 시간, 제목, 장소, 참여자, 메모 등을 포함한 일정을 생성, 조회, 수정, 삭제할 수 있습니다. 완료 여부도 표시할 수 있습니다.
* **일기 관리**: 특정 날짜에 제목, 내용, 감정, 날씨를 기록할 수 있습니다. 일기 내용을 수정, 조회, 삭제할 수 있습니다.
* **할 일(To-do) 관리**: 할 일 내용과 마감 기한을 설정하여 등록할 수 있습니다. 할 일 목록을 조회하고, 내용 수정, 완료 처리, 삭제가 가능합니다.
* **버킷리스트 관리**: 장기적인 목표를 내용으로 등록하고 관리할 수 있습니다. 목록 조회, 내용 수정, 완료 처리, 삭제가 가능합니다.

---

### 2.3 개인 설정 및 관리

사용자는 설정 페이지에서 자신의 정보를 관리하고 서비스 설정을 변경할 수 있습니다.

* **프로필 관리**: 닉네임, 주 시작 요일, 시간대, 공휴일 표시 여부 등 개인 설정을 수정합니다. 이메일과 계정 타입은 변경할 수 없습니다.
* **알림 설정**: AI 스몰토크, 일정 시작, 할 일 마감 등 다양한 알림의 활성화 여부, 시간, 요일 등을 설정할 수 있습니다.
* **동의 관리**: 온보딩 시 동의했던 선택 동의 항목(일기, 할 일, 버킷리스트 기반 추천)을 마이페이지에서 언제든지 변경할 수 있습니다. 필수 동의는 해제할 수 없습니다.
* **회원 탈퇴**: 계정을 삭제할 수 있으며, 이 경우 논리적 삭제 방식으로 처리됩니다.

---

### 2.4 AI 스몰토크 기능

AI는 사용자의 기록 데이터를 기반으로 맞춤형 스몰토크 주제를 생성합니다.

* **데이터 수집**: 일정, 일기, 할 일, 버킷리스트의 비정형 텍스트(제목, 내용, 메모 등)를 백엔드에서 수집합니다.
* **프롬프트 생성**: 수집된 사용자 텍스트와 함께 AI(Gemini)에 요청할 프롬프트를 구성합니다. 이때 개인정보(전화번호, 이메일 등)는 마스킹 처리됩니다.
* **주제 생성**: AI는 `JSON` 형식으로 5개의 스몰토크 주제를 반환합니다. 각 주제는 유형(`topicType`)과 내용(`topicContent`)으로 구성됩니다.
* **주제 활용**: 생성된 스몰토크 주제는 데이터베이스에 저장되고, 프론트엔드에 표시되어 사용자가 대화에 활용할 수 있도록 제공됩니다.

---

### 2.5 AI 연동 포인트

사용자가 기록을 작성하고 완료할 때마다 AI 추천 로직이 동작하는 중요한 포인트입니다.

* **일기 작성 완료**: 사용자가 일기를 작성하면, 해당 일기 데이터가 AI 스몰토크 추천 로직에 활용됩니다.
* **할 일 및 버킷리스트 작성/수정**: 사용자의 관심사나 성취에 대한 데이터가 AI 추천의 재료가 됩니다.
* **동의 기반 데이터 활용**: 사용자가 동의한 범위에 따라 AI의 개인화 수준이 달라집니다.
    * **일정 데이터**: 모든 사용자에게 제공되는 기본 AI 스몰토크의 기반이 됩니다.
    * **일기 데이터**: 감정, 기분 등 추가 개인화된 추천에 활용됩니다.
    * **할 일/버킷리스트 데이터**: 업무 패턴, 취미, 관심사 등 심화된 추천에 활용됩니다. 사용자가 선택 동의를 해제하면 해당 데이터는 AI 추천에서 제외됩니다.